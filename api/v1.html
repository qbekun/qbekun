<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>foreversadboys.ovh</title>
  <style>
    body {
      font-family: 'Comic Sans MS', sans-serif;
      background-color: #ffe6f2;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
      text-align: center;
      color: #6b4f47;
    }

    h1 {
      color: #ff66b2;
      font-size: 36px;
      margin-bottom: 20px;
    }

    #tag-form {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      gap: 10px;
      align-items: center;
      background-color: #ffe0f7;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    #tag-form input {
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ff99cc;
      background-color: #fff8e1;
      color: #6b4f47;
    }

    #tag-form button {
      padding: 12px 20px;
      background-color: #ff66b2;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
    }

    #tag-form button:hover {
      background-color: #ff3385;
    }

    .r18-label {
      font-size: 16px;
      color: #ff66b2;
      font-weight: bold;
      display: flex;
      align-items: center;
    }

    .r18-label input {
      margin-right: 10px;
    }

    #images-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      width: 80%;
      margin-top: 60px;
    }

    .image-card {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 300px;
      padding: 12px;
      text-align: center;
      overflow: hidden;
      border: 2px solid #fcbf77;
    }

    .image-card img {
      max-width: 100%;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.2s ease-in-out;
    }

    .image-card img:hover {
      transform: scale(1.05);
    }

    .image-details {
      margin-top: 10px;
      color: #6b4f47;
    }

    .image-details span {
      display: block;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      justify-content: center;
      margin-top: 10px;
    }

    .tag-list span {
      background-color: #fff2d0;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      color: #f87b99;
      border: 1px solid #ff8a88;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .overlay img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
    }

    .overlay.active {
      display: flex;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Forever Sad Boys Gallery</h1>
  
  <form id="tag-form">
    <label class="r18-label">
      <input type="checkbox" id="r18Check"> Show R18 Content
    </label>
    <input type="text" id="tags" name="tags" placeholder="e.g., genshinimpact, hutao">
    <button type="submit">Search</button>
  </form>

  <div id="images-container">
  </div>

  <div class="overlay" id="overlay">
    <img id="overlay-img" src="" alt="Enlarged Image">
  </div>

  <script>
    function getQueryParams() {
      const urlParams = new URLSearchParams(window.location.search);
      const r18 = urlParams.get('r18') || '0'; 
      const tags = urlParams.getAll('tag');
      return { r18, tags };
    }

    function buildApiUrl(r18, tags) {
      let url = `https://api.foreversadboys.ovh/v1?r18=${r18}`;
      tags.forEach(tag => {
        url += `&tag=${tag}`;
      });
      return url;
    }

    function loadImages(r18, tags) {
      const apiUrl = buildApiUrl(r18, tags);
      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          const imagesContainer = document.getElementById('images-container');
          imagesContainer.innerHTML = ''; 

          if (data && data.data && Array.isArray(data.data)) {
            data.data.forEach(image => {
              const imageCard = document.createElement('div');
              imageCard.className = 'image-card';

              const imageElement = document.createElement('img');
              imageElement.src = image.urls.original;
              imageElement.alt = image.title;
              imageElement.width = 300;
              imageElement.onclick = function() {
                showOverlay(image.urls.original);
              };

              const detailsDiv = document.createElement('div');
              detailsDiv.className = 'image-details';

              const authorSpan = document.createElement('span');
              authorSpan.textContent = `Author: ${image.author || 'Unknown'}`;

              const tagListDiv = document.createElement('div');
              tagListDiv.className = 'tag-list';
              image.tags.forEach(tag => {
                const tagSpan = document.createElement('span');
                tagSpan.textContent = tag;
                tagListDiv.appendChild(tagSpan);
              });

              detailsDiv.appendChild(authorSpan);
              detailsDiv.appendChild(tagListDiv);

              imageCard.appendChild(imageElement);
              imageCard.appendChild(detailsDiv);
              imagesContainer.appendChild(imageCard);
            });
          } else {
            imagesContainer.innerHTML = 'No images found.';
          }
        })
        .catch(error => {
          console.error('Error loading images:', error);
        });
    }

    function handleFormSubmit(event) {
      event.preventDefault();
      const tagsInput = document.getElementById('tags').value;
      const tags = tagsInput.split(',').map(tag => tag.trim());
      const { r18 } = getQueryParams();
      loadImages(r18, tags);
    }

    function toggleR18Param() {
      const r18Check = document.getElementById('r18Check');
      const r18Value = r18Check.checked ? '1' : '0';
      const urlParams = new URLSearchParams(window.location.search);
      urlParams.set('r18', r18Value);
      window.history.replaceState({}, '', '?' + urlParams.toString());
    }

    function showOverlay(imageUrl) {
      const overlay = document.getElementById('overlay');
      const overlayImg = document.getElementById('overlay-img');
      overlayImg.src = imageUrl;
      overlay.classList.add('active');
    }

    function closeOverlay() {
      const overlay = document.getElementById('overlay');
      overlay.classList.remove('active');
    }

    function init() {
      const { r18, tags } = getQueryParams();
      if (tags.length > 0) {
        loadImages(r18, tags);
      }

      const form = document.getElementById('tag-form');
      form.addEventListener('submit', handleFormSubmit);

      const overlay = document.getElementById('overlay');
      overlay.addEventListener('click', closeOverlay);

      const r18Check = document.getElementById('r18Check');
      r18Check.checked = r18 === '1';
      r18Check.addEventListener('change', toggleR18Param);
    }

    window.onload = init;
  </script>
</body>
</html>
